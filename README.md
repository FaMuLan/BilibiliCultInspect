# BilibiliCultInspect
委托写脚本，B网站直播观众成分检查。

## 原理
思路不复杂：监控B网站直播间当中进入直播间的用户，检查其是否关注有特定账号，并记录下来。

>~~比如检查〇P就是检查它是否关注〇神官方账号。~~

## 用途
主播可以拿这一堆数据为依据，以后要拉黑要扣帽子就方便许多。

## 使用方法

>需要安装Python 3.x，此外安装Python模块websocket-client以及brotil。此外可选各种SQLite数据库查看工具

### 运行

运行此Python脚本即可

`python bilibili_inspect_user.py`

在运行过程中程序会检查进入直播间的观众是否关注特定账号，有的话就记录下来，接着会重点关注此人的聊天记录和各种信息

### 参数设置

一般情况下需要在setting.json中设置好监听的直播间号码，以及作为关键成分的关注账号，以下列json代码为例（注意json不能使用注释）

	{
		"roomid": 1708320,
		//房间号
		"inspect_following": [
			//一个成分一组字典
			{
				"uid": 401742377,
				//账号UID
				"notification": "〇批"
				//成分名称，仅作提醒
			},
			{
				"uid": 672328094,
				"notification": "嘉批"
			}
		]
	}

### 保存数据

被标记的用户以及其相关信息会保存在flagged.db中。

这个数据库会记录三张表：被标记的用户(user)、进入直播间的相关数据(enter、弹幕发言(message)

user表：包含用户的UID和昵称

enter表：包含用户进入直播间时的UNIX时间，以及当时的用户等级

message表：包含用户发言的时间、内容

## 更新状况
就当是完成了，停止更新，除非有新的功能/bug反馈，或者有较多人有图形化的需求。
